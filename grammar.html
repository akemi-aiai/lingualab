<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grammar Magic ‚Äî LinguaLab</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />

  <style>
    :root {
      --primary: #22d3ee;
      --accent: #f97316;
      --navy: #1f4e79;
      --bg: #f8fafc;
      --radius: 24px;
      /* –ü–∞—Å—Ç–µ–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞ —é–Ω–∏—Ç–æ–≤ */
      --c1: #e0f2fe; --c2: #dcfce7; --c3: #fef3c7; --c4: #fee2e2;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: var(--bg); color: #0f172a; padding-top: 80px; }

    /* NAVBAR */
    .navbar {
      position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
      display: flex; align-items: center; justify-content: space-between;
      padding: 15px 40px; background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,.05);
    }
    .navbar-left { display: flex; align-items: center; gap: 12px; }
    .nav-logo { height: 50px; }
    .nav-title { font-size: 24px; font-weight: 800; color: var(--navy); }
    .navbar-right a { color: var(--navy); font-weight: 600; text-decoration: none; font-size: 14px; margin-left: 20px; }

    /* COMPACT HERO */
    .hero-compact {
      padding: 60px 8% 140px; text-align: center;
      background: linear-gradient(135deg, #22d3ee, #a78bfa); color: #fff;
    }
    .hero-compact h1 { font-size: 42px; font-weight: 800; margin-bottom: 10px; }
    .hero-info { display: flex; justify-content: center; align-items: center; gap: 20px; font-size: 18px; }

    .tree-badge {
      background: rgba(255, 255, 255, 0.2); padding: 6px 18px; border-radius: 999px;
      backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.3); font-weight: 700;
    }

    /* CONTENT WRAPPER */
    .content-wrapper { max-width: 1100px; margin: -100px auto 50px; position: relative; z-index: 10; padding: 0 20px; }

    /* TASK CARD */
    .task-card {
      background: #fff; border-radius: var(--radius); padding: 50px 40px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.08); margin-bottom: 40px;
      border: 1px solid #e2e8f0; text-align: center; position: relative; overflow: hidden;
      min-height: 280px; display: flex; flex-direction: column; justify-content: center;
    }

    .pb-container { position: absolute; top: 0; left: 0; width: 100%; height: 8px; background: #f1f5f9; }
    .pb-fill { height: 100%; width: 0%; background: var(--primary); transition: 0.4s; }

    #question { font-size: 26px; font-weight: 800; color: var(--navy); margin-bottom: 30px; }
    .answers-grid { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
    .answer-btn {
      padding: 16px 40px; border-radius: 999px; border: 3px solid var(--primary);
      background: #fff; color: var(--primary); font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.3s;
    }
    .answer-btn:hover { background: var(--primary); color: #fff; transform: translateY(-3px); }
    .answer-btn.correct { background: #10b981; border-color: #10b981; color: #fff; }
    .answer-btn.wrong { background: #ef4444; border-color: #ef4444; color: #fff; animation: shake 0.4s; }

    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

    /* UNITS */
    .topic-title { text-align: center; margin-bottom: 25px; font-weight: 800; color: var(--navy); font-size: 28px; }
    .units-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
    .card-item {
      background: #fff; padding: 25px; border-radius: var(--radius); text-align: center; cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.04); transition: 0.3s; border: 2px solid transparent;
    }
    .card-item:nth-child(1) { background: var(--c1); } .card-item:nth-child(2) { background: var(--c2); }
    .card-item:nth-child(3) { background: var(--c3); } .card-item:nth-child(4) { background: var(--c4); }
    .card-item:hover { transform: translateY(-5px); filter: brightness(0.95); }
    .card-item.active { border-color: var(--navy); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .card-item h3 { font-size: 18px; margin-bottom: 5px; font-weight: 700; color: var(--navy); }
    .card-item p { font-size: 14px; color: #64748b; }

    footer { background: #0f172a; color: #94a3b8; padding: 40px 8%; text-align: center; }

    @media (max-width: 900px) { .units-grid { grid-template-columns: repeat(2, 1fr); } }
  </style>
</head>
<body>

  <header class="navbar">
    <div class="navbar-left">
      <img src="assets/img/logo.png" alt="LL" class="nav-logo">
      <span class="nav-title">LinguaLab</span>
    </div>
    <nav class="navbar-right">
      <a href="index.html">Main Page</a>
      <a href="vocabulary.html">Word Bank</a>
      <a href="exercises.html">Fun Homework</a>
      <a href="parents.html">Wiki Parents</a>
    </nav>
  </header>

  <section class="hero-compact">
    <h1>Grammar Magic</h1>
    <div class="hero-info">
      <span>Play games and grow your Knowledge Tree! Select a Unit below to start!</span>
      <div class="tree-badge">Points: <span id="header-score">0</span></div>
    </div>
  </section>

  <div class="content-wrapper">
    <div class="task-card" id="task-card">
      <div class="pb-container"><div class="pb-fill" id="pb-fill"></div></div>
      <div id="question">Ready to study? Choose a Unit!</div>
      <div class="answers-grid" id="answer-grid"></div>
    </div>

    <h2 class="topic-title">Our Units</h2>
    <div class="units-grid">
      <div class="card-item" onclick="selectTopic('he_she', this)">
        <h3>Friends & Family</h3>
        <p>He / She</p>
      </div>
      <div class="card-item" onclick="selectTopic('plural', this)">
        <h3>Counting World</h3>
        <p>Plural nouns</p>
      </div>
      <div class="card-item" onclick="selectTopic('secret_places', this)">
        <h3>Secret Places</h3>
        <p>In / On / Under</p>
      </div>
      <div class="card-item" onclick="selectTopic('can', this)">
        <h3>I can...</h3>
        <p>Abilities</p>
      </div>
    </div>
  </div>

  <footer class="footer">
  ¬© <span id="year">2026</span> LinguaLab ‚Ä¢ Small lessons. Real progress. All rights reserved.
</footer>

  <script>
    const gameData = {
      he_she: [
        {q:"This is a girl. ___ is happy.", a:"She", options:["He","She"]},
        {q:"This is a boy. ___ has a ball.", a:"He", options:["He","She"]},
        {q:"Mom is nice. ___ loves me.", a:"She", options:["He","She"]},
        {q:"Dad is big. ___ is strong.", a:"He", options:["He","She"]},
        {q:"The Queen is here. ___ has a crown.", a:"She", options:["He","She"]},
        {q:"The King is old. ___ is on a horse.", a:"He", options:["He","She"]},
        {q:"My sister sings. ___ is loud.", a:"She", options:["He","She"]},
        {q:"My brother runs. ___ is fast.", a:"He", options:["He","She"]},
        {q:"Grandma is kind. ___ cooks cake.", a:"She", options:["He","She"]},
        {q:"Grandpa is wise. ___ reads books.", a:"He", options:["He","She"]},
        {q:"The doctor is a lady. ___ helps me.", a:"She", options:["He","She"]},
        {q:"The pilot is a man. ___ flies a plane.", a:"He", options:["He","She"]},
        {q:"A ballerina is pretty. ___ is dancing.", a:"She", options:["He","She"]},
        {q:"A fireman is brave. ___ puts out fire.", a:"He", options:["He","She"]},
        {q:"My aunt is tall. ___ lives in London.", a:"She", options:["He","She"]},
        {q:"My uncle is funny. ___ tells jokes.", a:"He", options:["He","She"]},
        {q:"The princess is sleeping. ___ is in bed.", a:"She", options:["He","She"]},
        {q:"The prince is young. ___ has a sword.", a:"He", options:["He","She"]},
        {q:"This woman is a teacher. ___ is smart.", a:"She", options:["He","She"]},
        {q:"This man is a baker. ___ makes bread.", a:"He", options:["He","She"]},
        {q:"A nurse is helpful. ___ is in a hospital.", a:"She", options:["He","She"]},
        {q:"An astronaut is a man. ___ is in space.", a:"He", options:["He","She"]},
        {q:"The girl has a doll. ___ is playing.", a:"She", options:["He","She"]},
        {q:"The boy has a car. ___ is racing.", a:"He", options:["He","She"]},
        {q:"Mommy is pretty. ___ wears a dress.", a:"She", options:["He","She"]},
        {q:"Daddy is cool. ___ wears a hat.", a:"He", options:["He","She"]},
        {q:"My friend Anna is 5. ___ is small.", a:"She", options:["He","She"]},
        {q:"My friend Tom is 6. ___ is tall.", a:"He", options:["He","She"]},
        {q:"The lady is singing. ___ is a star.", a:"She", options:["He","She"]},
        {q:"The guy is swimming. ___ is in the pool.", a:"He", options:["He","She"]}
      ],
      plural: [
        {q:"One cat, two ___.", a:"Cats", options:["Cat","Cats"]},
        {q:"One dog, three ___.", a:"Dogs", options:["Dog","Dogs"]},
        {q:"One apple, many ___.", a:"Apples", options:["Apple","Apples"]},
        {q:"One star, five ___.", a:"Stars", options:["Star","Stars"]},
        {q:"One tree, four ___.", a:"Trees", options:["Tree","Trees"]},
        {q:"One car, two ___.", a:"Cars", options:["Car","Cars"]},
        {q:"One bird, ten ___.", a:"Birds", options:["Bird","Birds"]},
        {q:"One book, many ___.", a:"Books", options:["Book","Books"]},
        {q:"One ball, six ___.", a:"Balls", options:["Ball","Balls"]},
        {q:"One flower, three ___.", a:"Flowers", options:["Flower","Flowers"]},
        {q:"One boy, two ___.", a:"Boys", options:["Boy","Boys"]},
        {q:"One girl, many ___.", a:"Girls", options:["Girl","Girls"]},
        {q:"One cup, four ___.", a:"Cups", options:["Cup","Cups"]},
        {q:"One doll, eight ___.", a:"Dolls", options:["Doll","Dolls"]},
        {q:"One frog, five ___.", a:"Frogs", options:["Frog","Frogs"]},
        {q:"One cake, two ___.", a:"Cakes", options:["Cake","Cakes"]},
        {q:"One boat, many ___.", a:"Boats", options:["Boat","Boats"]},
        {q:"One egg, six ___.", a:"Eggs", options:["Egg","Eggs"]},
        {q:"One bee, three ___.", a:"Bees", options:["Bee","Bees"]},
        {q:"One ___, two hats.", a:"Hat", options:["Hat","Hats"]},
        {q:"One ___, many pigs.", a:"Pig", options:["Pig","Pigs"]},
        {q:"One ___, four pears.", a:"Pear", options:["Pear","Pears"]},
        {q:"One ___, seven ducks.", a:"Duck", options:["Duck","Ducks"]},
        {q:"One ___, three ships.", a:"Ship", options:["Ship","Ships"]},
        {q:"One foot, two ___.", a:"Feet", options:["Feet","Feets"]}, 
        {q:"One man, many ___.", a:"Men", options:["Men","Mans"]}, 
        {q:"One leaf, five ___.", a:"Leaves", options:["Leaves","Leafs"]},
        {q:"One ___, many wolves.", a:"Wolf", options:["Wolf","Wolfs"]},
        {q:"One ___, two foxes.", a:"Fox", options:["Fox","Foxs"]}, 
        {q:"One deer, four ___.", a:"Deer", options:["Deer","Deers"]}
      ],
      secret_places: [
        {q:"The cat is ___ the box.", a:"In", options:["In","On","Under"]},
        {q:"The apple is ___ the table.", a:"On", options:["In","On","Under"]},
        {q:"The dog is ___ the bed.", a:"Under", options:["In","On","Under"]},
        {q:"The fish is ___ the water.", a:"In", options:["In","On","Under"]},
        {q:"The bird is ___ the tree.", a:"In", options:["In","On","Under"]},
        {q:"The shoes are ___ the chair.", a:"Under", options:["In","On","Under"]},
        {q:"The pencil is ___ the cup.", a:"In", options:["In","On","Under"]},
        {q:"The lamp is ___ the desk.", a:"On", options:["In","On","Under"]},
        {q:"The toy is ___ the car.", a:"Under", options:["In","On","Under"]},
        {q:"The milk is ___ the fridge.", a:"In", options:["In","On","Under"]},
        {q:"The hat is ___ the head.", a:"On", options:["In","On","Under"]},
        {q:"The rug is ___ the floor.", a:"On", options:["In","On","Under"]},
        {q:"The ball is ___ the grass.", a:"On", options:["In","On","Under"]},
        {q:"The money is ___ the bag.", a:"In", options:["In","On","Under"]},
        {q:"The rabbit is ___ the ground.", a:"Under", options:["In","On","Under"]},
        {q:"The socks are ___ the boots.", a:"In", options:["In","On","Under"]},
        {q:"The sun is ___ the sky.", a:"In", options:["In","On","Under"]},
        {q:"The butter is ___ the bread.", a:"On", options:["In","On","Under"]},
        {q:"The treasure is ___ the sand.", a:"Under", options:["In","On","Under"]},
        {q:"The candy is ___ the jar.", a:"In", options:["In","On","Under"]},
        {q:"The plate is ___ the table.", a:"On", options:["In","On","Under"]},
        {q:"The monster is ___ the bed!", a:"Under", options:["In","On","Under"]},
        {q:"The spider is ___ the wall.", a:"On", options:["In","On","Under"]},
        {q:"The keys are ___ the pocket.", a:"In", options:["In","On","Under"]},
        {q:"The boat is ___ the sea.", a:"On", options:["In","On","Under"]},
        {q:"The worm is ___ the apple.", a:"In", options:["In","On","Under"]},
        {q:"The book is ___ the shelf.", a:"On", options:["In","On","Under"]},
        {q:"The ring is ___ the finger.", a:"On", options:["In","On","Under"]},
      ],
      can: [
        {q:"A bird ___ fly.", a:"Can", options:["Can","Can't"]},
        {q:"A fish ___ walk.", a:"Can't", options:["Can","Can't"]},
        {q:"A frog ___ jump.", a:"Can", options:["Can","Can't"]},
        {q:"A baby ___ drive.", a:"Can't", options:["Can","Can't"]},
        {q:"A monkey ___ climb.", a:"Can", options:["Can","Can't"]},
        {q:"A cat ___ fly.", a:"Can't", options:["Can","Can't"]},
        {q:"A kangaroo ___ hop.", a:"Can", options:["Can","Can't"]},
        {q:"A dog ___ sing.", a:"Can't", options:["Can","Can't"]},
        {q:"A dolphin ___ swim.", a:"Can", options:["Can","Can't"]},
        {q:"A snake ___ run.", a:"Can't", options:["Can","Can't"]},
        {q:"I ___ clap my hands.", a:"Can", options:["Can","Can't"]},
        {q:"An elephant ___ fly.", a:"Can't", options:["Can","Can't"]},
        {q:"A lion ___ roar.", a:"Can", options:["Can","Can't"]},
        {q:"A penguin ___ fly.", a:"Can't", options:["Can","Can't"]},
        {q:"A spider ___ spin a web.", a:"Can", options:["Can","Can't"]},
        {q:"A pig ___ read.", a:"Can't", options:["Can","Can't"]},
        {q:"A rabbit ___ run fast.", a:"Can", options:["Can","Can't"]},
        {q:"A tree ___ walk.", a:"Can't", options:["Can","Can't"]},
        {q:"Honeybees ___ make honey.", a:"Can", options:["Can","Can't"]},
        {q:"A turtle ___ run fast.", a:"Can't", options:["Can","Can't"]},
        {q:"A cow ___ say 'moo'.", a:"Can", options:["Can","Can't"]},
        {q:"A car ___ talk.", a:"Can't", options:["Can","Can't"]},
        {q:"A horse ___ run.", a:"Can", options:["Can","Can't"]},
        {q:"A fire ___ be cold.", a:"Can't", options:["Can","Can't"]},
        {q:"A chef ___ cook.", a:"Can", options:["Can","Can't"]},
        {q:"A stone ___ eat.", a:"Can't", options:["Can","Can't"]},
        {q:"A parrot ___ talk.", a:"Can", options:["Can","Can't"]},
        {q:"A ball ___ bounce.", a:"Can", options:["Can","Can't"]},
        {q:"A superhero ___ help.", a:"Can", options:["Can","Can't"]},
      ]
    };

    let activeTopic = '';
    let activeTask = null;
    let usedIndexes = [];

    function selectTopic(topic, element) {
      activeTopic = topic;
      usedIndexes = [];
      document.querySelectorAll('.card-item').forEach(c => c.classList.remove('active'));
      element.classList.add('active');
      document.getElementById('pb-fill').style.width = '0%';
      loadTask();
    }

    function loadTask() {
      const tasks = gameData[activeTopic];
      if (usedIndexes.length >= tasks.length) usedIndexes = [];

      let index;
      do { index = Math.floor(Math.random() * tasks.length); } 
      while (usedIndexes.includes(index));
      
      usedIndexes.push(index);
      activeTask = tasks[index];

      document.getElementById('question').innerText = activeTask.q;
      const grid = document.getElementById('answer-grid');
      grid.innerHTML = '';

      activeTask.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.innerText = opt;
        btn.onclick = () => checkResult(opt, btn);
        grid.appendChild(btn);
      });
    }
    function playSound() {
    try {
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();

        osc.connect(gain);
        gain.connect(audioCtx.destination);

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ "–≤–æ–ª—à–µ–±–Ω–æ–≥–æ" –∑–≤—É–∫–∞
        osc.type = 'sine';
        osc.frequency.setValueAtTime(523.25, audioCtx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1046.50, audioCtx.currentTime + 0.1);

        gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);

        osc.start();
        osc.stop(audioCtx.currentTime + 0.3);
    } catch (e) {
        console.log("Audio not supported or blocked by browser");
    }
}


    function checkResult(choice, btn) {
      if (choice === activeTask.a) {
          btn.classList.add('correct');
        
          playSound(); 
          awardPoint();
        
        // –ü–æ–ª–æ—Å–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–æ—Ç 30 –≤–æ–ø—Ä–æ—Å–æ–≤)
        const progress = (usedIndexes.length / 30) * 100;
        document.getElementById('pb-fill').style.width = progress + '%';

        document.getElementById('question').innerText = "Correct! +1 Point! üåü";
        setTimeout(loadTask, 1000);
    } else {
        btn.classList.add('wrong');
        setTimeout(() => btn.classList.remove('wrong'), 500);
    }
}

    function awardPoint() {
      let score = parseInt(localStorage.getItem('ll_score')) || 0;
      score++; 
      localStorage.setItem('ll_score', score);
      document.getElementById('header-score').innerText = score;
    }

    window.addEventListener('DOMContentLoaded', () => {
      document.getElementById('header-score').innerText = localStorage.getItem('ll_score') || 0;
    
      const y = document.getElementById('year');
      if (y) y.textContent = String(new Date().getFullYear());
    });

  </script>
</body>
</html>
