<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson â€” LinguaLab</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #22d3ee; --navy: #1f4e79; --bg: #f8fafc; --white: #ffffff; --orange: #f97316; --green: #10b981; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); margin: 0; padding: 20px; color: #334155; padding-bottom: 100px; }
        
        .container { max-width: 800px; margin: 0 auto; }
        
        /* Nav */
        .back-btn { display: inline-flex; align-items: center; text-decoration: none; color: var(--navy); font-weight: 700; margin-bottom: 20px; background: white; padding: 10px 20px; border-radius: 99px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .back-btn span { margin-right: 8px; font-size: 18px; }

        /* Header */
        .lesson-header { 
            background: linear-gradient(135deg, var(--navy), #3b82f6); color: white; 
            border-radius: 24px; padding: 30px; margin-bottom: 30px; text-align: center;
            box-shadow: 0 10px 25px rgba(31, 78, 121, 0.2);
        }
        .lesson-tag { background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .lesson-title { font-size: 28px; font-weight: 800; margin: 15px 0 5px; }
        .lesson-subtitle { opacity: 0.9; font-size: 16px; }

        /* Step Cards */
        .step-card { 
            background: white; border-radius: 20px; padding: 25px; margin-bottom: 25px; 
            border: 1px solid #e2e8f0; position: relative; overflow: hidden;
        }
        .step-number { 
            background: var(--primary); color: var(--navy); width: 30px; height: 30px; 
            border-radius: 50%; display: flex; align-items: center; justify-content: center; 
            font-weight: 800; margin-bottom: 15px; font-size: 14px;
        }
        .step-title { font-weight: 800; color: var(--navy); font-size: 18px; margin-bottom: 5px; }
        .step-desc-en { font-size: 18px; color: #0f172a; margin-bottom: 8px; font-weight: 600; }
        .step-desc-zh { font-size: 15px; color: #64748b; line-height: 1.6; border-left: 3px solid #cbd5e1; padding-left: 10px; margin-bottom: 15px; }

        /* Interactive Elements */
        .flashcard-box { 
            background: #f0f9ff; border: 2px dashed #bae6fd; border-radius: 12px; 
            padding: 20px; text-align: center; margin: 15px 0; 
        }
        .vocab-word { font-size: 24px; font-weight: 800; color: #0284c7; display: block; }
        
        .action-btn {
            background: var(--orange); color: white; border: none; padding: 10px 20px; 
            border-radius: 10px; font-weight: 700; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;
        }

        /* Audio Recorder */
        .audio-box { background: #f8fafc; padding: 20px; border-radius: 16px; display: flex; align-items: center; gap: 15px; border: 1px solid #e2e8f0; }
        .rec-btn { 
            width: 50px; height: 50px; border-radius: 50%; border: none; 
            background: #ef4444; color: white; cursor: pointer; 
            display: flex; justify-content: center; align-items: center; transition: 0.2s;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
        }
        .rec-btn.recording { animation: pulse 1.5s infinite; background: #991b1b; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.6); } 70% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); } }

        /* Floating Footer */
        .floating-footer {
            position: fixed; bottom: 0; left: 0; width: 100%; background: white;
            padding: 15px; box-shadow: 0 -5px 20px rgba(0,0,0,0.05); text-align: center;
        }
        .complete-btn { 
            background: var(--navy); color: white; border: none; padding: 15px 40px; 
            border-radius: 14px; font-size: 18px; font-weight: 800; cursor: pointer; 
            transition: 0.3s; width: 100%; max-width: 600px;
        }
        .complete-btn:hover { transform: translateY(-3px); background: #334155; }

        /* Sticker Modal */
        .sticker-modal { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); 
            display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px);
        }
        .sticker-content { background: white; padding: 40px; border-radius: 30px; text-align: center; animation: pop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes pop { 0% { transform: scale(0); } 100% { transform: scale(1); } }

    </style>
</head>
<body>

<div class="container">
    <a href="exercises.html" class="back-btn"><span>â†</span> Back to Dashboard</a>

    <div id="lesson-container">
        </div>
    <div style="height: 60px;"></div> </div>

<div class="floating-footer">
    <button class="complete-btn" onclick="finishLesson()">
        ğŸ‰ I finished everything!
    </button>
</div>

<div class="sticker-modal" id="modal" onclick="this.style.display='none'">
    <div class="sticker-content">
        <img src="https://cdn-icons-png.flaticon.com/512/3084/3084530.png" width="140" style="margin-bottom: 20px;">
        <h2 style="color: var(--navy); margin: 0;">Super Star!</h2>
        <p>You completed this week's mission!</p>
    </div>
</div>

<script>
    // ===========================================
    // ğŸ“š EXPANDED DATABASE (Based on Units 2-7 PDFs)
    // ===========================================
    const db = {
        "Sep": [
            // Week 1
            {
                title: "Greetings & Song",
                tag: "Unit 2: My School",
                steps: [
                    [cite_start]{ type: "warmup", title: "Sing Along", en: "Play the 'Hello' song. Wave your hand!", zh: "æ’­æ”¾ 'Hello' æ­Œ (èª²æœ¬ç¬¬10é )ã€‚ä¸€é‚Šå”±ä¸€é‚Šæ®æ‰‹æ‰“æ‹›å‘¼ï¼ [cite: 32]" },
                    [cite_start]{ type: "learn", title: "Practice Speaking", en: "Say: 'Hello, I'm (Name).'", zh: "ç·´ç¿’è‡ªæˆ‘ä»‹ç´¹ï¼š'Hello, I'm... (åŠ ä¸Šå­©å­çš„åå­—)' [cite: 4]ã€‚", vocab: ["Hello", "I'm..."] },
                    [cite_start]{ type: "action", title: "Game Time", en: "When I say 'Hello', you stand up!", zh: "éŠæˆ²ï¼šç•¶å®¶é•·èªª 'Hello' æ™‚ï¼Œå­©å­è¦å¿«é€Ÿç«™èµ·ä¾† (Stand up) [cite: 35]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Good morning, teacher.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Good morning, teacher.'", phrase: "Good morning, teacher." }
                ]
            },
            // Week 2
            {
                title: "School Objects Hunt",
                tag: "Unit 2: My School",
                steps: [
                    { type: "warmup", title: "Look & Find", en: "Watch the story. [cite_start]Can you see a bag?", zh: "è§€çœ‹æ•…äº‹å‹•ç•«ã€‚ä½ èƒ½æ‰¾åˆ°æ›¸åŒ… (Bag) å—ï¼Ÿ [cite: 53]" },
                    [cite_start]{ type: "learn", title: "New Words", en: "Learn: Bag, Book, Teacher.", zh: "å­¸ç¿’å–®è©ï¼šBag (æ›¸åŒ…), Book (æ›¸), Teacher (è€å¸«) [cite: 8]ã€‚", vocab: ["Bag", "Book"] },
                    { type: "action", title: "Hide & Seek", en: "Hide a book. Ask: 'Where is the book?'", zh: "å°‹å¯¶éŠæˆ²ï¼šæŠŠæ›¸è—èµ·ä¾†ã€‚å• 'Where is the book?' [cite_start]è®“å­©å­æ‰¾å‡ºä¾† [cite: 57]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'It is a book.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'It is a book.'", phrase: "It is a book." }
                ]
            },
            // Week 3
            {
                title: "The Magic 'B' & TPR",
                tag: "Unit 2: Phonics",
                steps: [
                    { type: "warmup", title: "Chant", en: "Chant: 'Book, book, book. Bag, bag, bag.'", zh: "å”¸è¬ ï¼šBook, book, book. [cite_start]Bag, bag, bag. [cite: 206]" },
                    [cite_start]{ type: "learn", title: "Phonics Sound", en: "The letter B makes the /b/ sound.", zh: "å­—æ¯ B ç™¼å‡º /b/ çš„è²éŸ³ã€‚åƒ 'Ball' å’Œ 'Baby' [cite: 184]ã€‚", vocab: ["Bb", "/b/"] },
                    { type: "action", title: "Commands", en: "Do the action: 'Open your book'. [cite_start]'Show me your book'.", zh: "è½æŒ‡ä»¤åšå‹•ä½œï¼šOpen your book (æ‰“é–‹æ›¸)ï¼ŒShow me your book (çµ¦æˆ‘çœ‹æ›¸) [cite: 16]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Open your book.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Open your book.'", phrase: "Open your book." }
                ]
            },
            // Week 4
            {
                title: "Review: First Day",
                tag: "Unit 2: Revision",
                steps: [
                    { type: "warmup", title: "Who is this?", en: "Look at the picture. [cite_start]Point to Mike and Kelly.", zh: "çœ‹åœ–ç‰‡ã€‚æŒ‡å‡ºèª°æ˜¯ Mikeï¼Œèª°æ˜¯ Kelly [cite: 234]ã€‚" },
                    [cite_start]{ type: "learn", title: "Sticker Fun", en: "Stick the 'Book' sticker on the correct page.", zh: "è²¼ç´™æ´»å‹•ï¼šæŠŠ 'Book' çš„è²¼ç´™è²¼åœ¨èª²æœ¬æ­£ç¢ºçš„ä½ç½® [cite: 101]ã€‚", vocab: ["Mike", "Kelly"] },
                    { type: "action", title: "Simon Says", en: "Simon says: 'Touch your bag'.", zh: "è€å¸«èªªï¼šæ‘¸æ‘¸ä½ çš„æ›¸åŒ… (Touch your bag)ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Hello, I'm Mike.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Hello, I'm Mike.'", phrase: "Hello, I'm Mike." }
                ]
            }
        ],
        "Oct": [
            // Week 1 (Unit 3)
            {
                title: "Boy or Girl?",
                tag: "Unit 3: My Friends",
                steps: [
                    [cite_start]{ type: "warmup", title: "Song Time", en: "Sing: 'You're a boy / You're a girl'.", zh: "å”±æ­Œï¼š'You're a boy' (ä½ æ˜¯ç”·å­©)ï¼Œ'You're a girl' (ä½ æ˜¯å¥³å­©) [cite: 423]ã€‚" },
                    [cite_start]{ type: "learn", title: "Gender Words", en: "Learn: Boy, Girl.", zh: "å­¸ç¿’å–®è©ï¼šBoy (ç”·å­©), Girl (å¥³å­©) [cite: 390]ã€‚", vocab: ["Boy", "Girl"] },
                    { type: "action", title: "Line Up", en: "Game: Boys stand here. [cite_start]Girls stand there.", zh: "éŠæˆ²ï¼šç”·å­©ç«™é€™é‚Šï¼Œå¥³å­©ç«™é‚£é‚Š (Please stand here/there) [cite: 418]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'I am a girl.' (or Boy)", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'I am a girl/boy.'", phrase: "I am a girl." }
                ]
            },
            // Week 2
            {
                title: "My Best Friend",
                tag: "Unit 3: My Friends",
                steps: [
                    [cite_start]{ type: "warmup", title: "Show a Photo", en: "Show a photo of a friend.", zh: "å±•ç¤ºä¸€å¼µæœ‹å‹çš„ç…§ç‰‡ [cite: 470]ã€‚" },
                    [cite_start]{ type: "learn", title: "Phrase", en: "Say: 'This is my friend'.", zh: "ç·´ç¿’èªªï¼š'This is my friend' (é€™æ˜¯æˆ‘çš„æœ‹å‹) [cite: 470]ã€‚", vocab: ["My Friend"] },
                    [cite_start]{ type: "action", title: "Drawing", en: "Draw your friend's face.", zh: "ç•«å‡ºä½ å¥½æœ‹å‹çš„æ¨£å­ [cite: 473]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'This is my friend.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'This is my friend.'", phrase: "This is my friend." }
                ]
            },
            // Week 3
            {
                title: "Phonics Gg & TPR",
                tag: "Unit 3: Phonics",
                steps: [
                    { type: "warmup", title: "Listen", en: "Listen to the sound /g/. [cite_start]'Girls' and 'Game'.", zh: "è½ /g/ çš„ç™¼éŸ³ã€‚å–®è©ï¼šGirls (å¥³å­©å€‘), Game (éŠæˆ²) [cite: 545]ã€‚", vocab: ["Gg", "/g/"] },
                    { type: "action", title: "Commands", en: "Do the action: 'Stand up'. [cite_start]'Sit down'.", zh: "è½æŒ‡ä»¤åšå‹•ä½œï¼šStand up (èµ·ç«‹), Sit down (åä¸‹) [cite: 397]ã€‚" },
                    { type: "action", title: "Game", en: "Play Musical Chairs.", zh: "ç©æ¶æ¤…å­éŠæˆ² (ç·´ç¿’ Sit down)ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Stand up, please.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Stand up, please.'", phrase: "Stand up, please." }
                ]
            },
            // Week 4
            {
                title: "Story: Messy Family",
                tag: "Reader 1",
                steps: [
                    { type: "warmup", title: "Story Time", en: "Read 'A Messy Family'. [cite_start]Look at the messy room!", zh: "é–±è®€æ•…äº‹ï¼š'A Messy Family'ã€‚çœ‹çœ‹æˆ¿é–“å¤šäº‚ï¼ [cite: 303]" },
                    [cite_start]{ type: "learn", title: "Family Words", en: "Find Daddy and Mommy in the picture.", zh: "åœ¨åœ–ä¸­æ‰¾å‡º Daddy (çˆ¸çˆ¸) å’Œ Mommy (åª½åª½) [cite: 288]ã€‚", vocab: ["Daddy", "Mommy"] },
                    [cite_start]{ type: "action", title: "Bean Bag Toss", en: "Throw a bean bag on 'Daddy' picture.", zh: "ä¸Ÿæ²™åŒ…éŠæˆ²ï¼šä¸Ÿåˆ°çˆ¸çˆ¸çš„åœ–ç‰‡ä¸Šä¸¦èªª 'My Daddy' [cite: 322]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'This is my Daddy.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'This is my Daddy.'", phrase: "This is my Daddy." }
                ]
            }
        ],
        "Nov": [
            // Week 1 (Unit 4)
            {
                title: "My Face Song",
                tag: "Unit 4: My Face",
                steps: [
                    { type: "warmup", title: "Sing & Touch", en: "Sing: 'Eyes, ears, nose and mouth'. [cite_start]Touch parts.", zh: "å”±æ­Œä¸¦è§¸æ‘¸éƒ¨ä½ï¼šEyes (çœ¼), Ears (è€³), Nose (é¼»), Mouth (å£) [cite: 620]ã€‚" },
                    [cite_start]{ type: "learn", title: "Vocabulary", en: "Flashcards: Eye, Ear, Mouth, Nose.", zh: "å–®è©å¡ï¼šEye, Ear, Mouth, Nose [cite: 589]ã€‚", vocab: ["Eye", "Nose"] },
                    { type: "action", title: "Fast Touch", en: "Parent says 'Nose!' Child touches nose quickly.", zh: "åæ‡‰éŠæˆ²ï¼šå®¶é•·èªª 'Nose!' [cite_start]å­©å­å¿«é€Ÿæ‘¸é¼»å­ [cite: 671]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'My nose.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'My nose.'", phrase: "My nose." }
                ]
            },
            // Week 2
            {
                title: "Funny Fruit Face",
                tag: "Unit 4: My Face",
                steps: [
                    [cite_start]{ type: "warmup", title: "Watch Story", en: "Watch Mike and Kelly make fruit faces.", zh: "çœ‹ Mike å’Œ Kelly ç”¨æ°´æœæ‹¼è‡‰è­œçš„æ•…äº‹ [cite: 643]ã€‚" },
                    [cite_start]{ type: "learn", title: "Sentence", en: "Say: 'This is my mouth'.", zh: "ç·´ç¿’å¥å­ï¼š'This is my mouth' (é€™æ˜¯æˆ‘çš„å˜´å·´) [cite: 587]ã€‚", vocab: ["This is..."] },
                    [cite_start]{ type: "action", title: "Make a Face", en: "Use real fruit to make a face on a plate!", zh: "å‹•æ‰‹åšï¼šåœ¨ç›¤å­è£¡ç”¨æ°´æœç‰‡æ‹¼å‡ºä¸€å¼µè‡‰ [cite: 634]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'This is my mouth.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'This is my mouth.'", phrase: "This is my mouth." }
                ]
            },
            // Week 3
            {
                title: "Phonics Mm & Eyes",
                tag: "Unit 4: Phonics",
                steps: [
                    [cite_start]{ type: "warmup", title: "Sound Check", en: "The sound /m/ is for Monkey and Mouth.", zh: "/m/ æ˜¯ Monkey (çŒ´å­) å’Œ Mouth (å˜´å·´) çš„ç™¼éŸ³ [cite: 750]ã€‚", vocab: ["Mm", "/m/"] },
                    { type: "action", title: "Commands", en: "Close your eyes. [cite_start]Open your eyes.", zh: "è½æŒ‡ä»¤ï¼šClose your eyes (é–‰çœ¼)ï¼ŒOpen your eyes (çœçœ¼) [cite: 596]ã€‚" },
                    { type: "action", title: "Peek-a-boo", en: "Play Peek-a-boo!", zh: "ç©èº²è²“è²“éŠæˆ²ï¼" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Close your eyes.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Close your eyes.'", phrase: "Close your eyes." }
                ]
            },
            // Week 4
            {
                title: "Reader: Buzz! Buzz!",
                tag: "Reader 2",
                steps: [
                    { type: "warmup", title: "Bee Story", en: "Read 'Buzz! Buzz!'. A bee is coming!", zh: "é–±è®€æ•…äº‹ï¼šBuzz! Buzz! [cite_start]èœœèœ‚ä¾†äº†ï¼ [cite: 831]" },
                    { type: "learn", title: "New Word", en: "Learn: Hair. [cite_start]The bee is on the hair.", zh: "æ–°å–®è©ï¼šHair (é ­é«®)ã€‚èœœèœ‚åœåœ¨é ­é«®ä¸Š [cite: 842]ã€‚", vocab: ["Hair"] },
                    { type: "action", title: "Bee Game", en: "Parent pretends to be a bee. [cite_start]Child covers nose/ear.", zh: "èœœèœ‚éŠæˆ²ï¼šå®¶é•·æ‰®èœœèœ‚ã€‚å­©å­è¦è¶•å¿«æ‚ä½è¢«é»åˆ°çš„éƒ¨ä½ä¸¦å–Š 'My Ear!' [cite: 860]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Oh, my hair!'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Oh, my hair!'", phrase: "Oh, my hair!" }
                ]
            }
        ],
        "Dec": [
            // Week 1 (Unit 5)
            {
                title: "Farm Animals",
                tag: "Unit 5: On the Farm",
                steps: [
                    { type: "warmup", title: "Animal Sounds", en: "What does a Cow say? [cite_start]Moo!", zh: "å‹•ç‰©å«è²ï¼šCow (ç‰›) æ€éº¼å«ï¼Ÿ Moo! [cite: 960]ã€‚", vocab: ["Cow", "Pig"] },
                    [cite_start]{ type: "learn", title: "Vocabulary", en: "Learn: Cow, Pig, Hen, Duck.", zh: "å­¸ç¿’å–®è©ï¼šCow (ç‰›), Pig (è±¬), Hen (æ¯é›), Duck (é´¨å­) [cite: 940]ã€‚" },
                    { type: "action", title: "Act it out", en: "Walk like a duck!", zh: "æ¨¡ä»¿å‹•ä½œï¼šåƒé´¨å­ä¸€æ¨£èµ°è·¯ (Waddle like a duck)ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'It is a duck.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'It is a duck.'", phrase: "It is a duck." }
                ]
            },
            // Week 2
            {
                title: "Counting 1-2-3",
                tag: "Unit 5: On the Farm",
                steps: [
                    { type: "warmup", title: "Song", en: "Sing: 'Cows! Cows! 1, 2, 3.'", zh: "å”±æ­Œï¼š'Cows! Cows! [cite_start]1, 2, 3.' [cite: 979]" },
                    [cite_start]{ type: "learn", title: "Numbers", en: "Count: One, Two, Three.", zh: "æ•¸æ•¸ï¼šOne (1), Two (2), Three (3) [cite: 941]ã€‚", vocab: ["1", "2", "3"] },
                    { type: "action", title: "Finger Play", en: "Show me your fingers. [cite_start]Show me 2.", zh: "æ‰‹æŒ‡éŠæˆ²ï¼šShow me your fingers (çµ¦æˆ‘çœ‹æ‰‹æŒ‡)ã€‚Show me 2 [cite: 948]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'One, two, three.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'One, two, three.'", phrase: "One, two, three." }
                ]
            },
            // Week 3
            {
                title: "Phonics Pp & Pink",
                tag: "Unit 5: Phonics",
                steps: [
                    { type: "warmup", title: "Chant", en: "Chant: 'Pig, pig, pig. Pink, pink, pink.'", zh: "å”¸è¬ ï¼šPig, pig, pig. [cite_start]Pink, pink, pink [cite: 1137]ã€‚", vocab: ["Pp", "/p/"] },
                    [cite_start]{ type: "action", title: "Color Hunt", en: "Find something Pink in your room.", zh: "å°‹æ‰¾é¡è‰²ï¼šåœ¨æˆ¿é–“è£¡æ‰¾ä¸€å€‹ç²‰ç´…è‰² (Pink) çš„æ±è¥¿ [cite: 1115]ã€‚" },
                    [cite_start]{ type: "action", title: "Count Ducks", en: "Count the ducks in the book.", zh: "æŒ‡ä»¤ï¼šCount the ducks (æ•¸æ•¸é´¨å­) [cite: 948]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'A pink pig.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'A pink pig.'", phrase: "A pink pig." }
                ]
            },
            // Week 4
            {
                title: "Winter Review",
                tag: "Unit 5: Revision",
                steps: [
                    { type: "warmup", title: "Missing Animal", en: "Cover a toy. [cite_start]Guess what animal it is.", zh: "çŒœçŒœçœ‹ï¼šè“‹ä½ä¸€å€‹å‹•ç‰©ç©å…·ã€‚çŒœçŒœæ˜¯å“ªä¸€å€‹ï¼Ÿ [cite: 1084]" },
                    [cite_start]{ type: "learn", title: "Math Fun", en: "One plus one equals two.", zh: "æ•¸å­¸æ¨‚è¶£ï¼šOne plus one equals two (1+1=2) [cite: 1086]ã€‚", vocab: ["1+1=2"] },
                    { type: "action", title: "Toss Game", en: "Toss a box. [cite_start]Say the number and animal.", zh: "æ‹‹ç›’å­éŠæˆ²ï¼šæ‹‹å‡ºç›’å­ï¼Œèªªå‡ºä¸Šé¢çš„å‹•ç‰©å’Œæ•¸é‡ [cite: 1065]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'I see two pigs.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'I see two pigs.'", phrase: "I see two pigs." }
                ]
            }
        ],
        "Jan": [
            // Week 1 (Unit 6)
            {
                title: "Zoo Animals",
                tag: "Unit 6: At the Zoo",
                steps: [
                    [cite_start]{ type: "warmup", title: "Song", en: "Sing: 'A monkey at the zoo'.", zh: "å”±æ­Œï¼š'A monkey at the zoo' [cite: 1194]ã€‚", vocab: ["Zoo"] },
                    [cite_start]{ type: "learn", title: "New Animals", en: "Learn: Bear, Panda, Tiger, Monkey.", zh: "æ–°å‹•ç‰©ï¼šBear (ç†Š), Panda (ç†Šè²“), Tiger (è€è™), Monkey (çŒ´å­) [cite: 1164]ã€‚" },
                    { type: "action", title: "Count to 5", en: "Count: Four Pandas. [cite_start]Five Monkeys.", zh: "æ•¸æ•¸ï¼šFour (4) éš»ç†Šè²“ï¼ŒFive (5) éš»çŒ´å­ [cite: 1159]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Four pandas.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Four pandas.'", phrase: "Four pandas." }
                ]
            },
            // Week 2
            {
                title: "Take a Photo",
                tag: "Unit 6: At the Zoo",
                steps: [
                    [cite_start]{ type: "warmup", title: "Look!", en: "Point and say: 'Look at the panda'.", zh: "æŒ‡è‘—èªªï¼šLook at the panda (çœ‹é‚£éš»ç†Šè²“) [cite: 1171]ã€‚" },
                    [cite_start]{ type: "learn", title: "Action Word", en: "Learn: Take a photo.", zh: "å‹•ä½œè©å½™ï¼šTake a photo (æ‹ç…§) [cite: 1171]ã€‚", vocab: ["Photo"] },
                    { type: "action", title: "Photographer", en: "Pretend to use a camera. Click!", zh: "å°å°æ”å½±å¸«ï¼šå‡è£æ‹¿ç›¸æ©Ÿçµ¦å‹•ç‰©æ‹ç…§ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Take a photo.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Take a photo.'", phrase: "Take a photo." }
                ]
            },
            // Week 3
            {
                title: "Phonics Tt & Tea",
                tag: "Unit 6: Phonics",
                steps: [
                    [cite_start]{ type: "warmup", title: "Chant", en: "Chant: 'Two tigers having tea'.", zh: "å”¸è¬ ï¼šTwo tigers having tea (å…©éš»è€è™å–èŒ¶) [cite: 1357]ã€‚", vocab: ["Tt", "/t/"] },
                    [cite_start]{ type: "learn", title: "Tea Party", en: "T is for Tiger and Tea.", zh: "T æ˜¯ Tiger (è€è™) å’Œ Tea (èŒ¶) [cite: 1334]ã€‚" },
                    { type: "action", title: "Roleplay", en: "Pretend to drink tea. [cite_start]Say 'Thank you'.", zh: "è§’è‰²æ‰®æ¼”ï¼šå‡è£å–èŒ¶ï¼Œèªª 'Thank you' [cite: 1348]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Tea, please.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Tea, please.'", phrase: "Tea, please." }
                ]
            }
        ],
        "Feb": [
            // Week 1 (Unit 7)
            {
                title: "Transport Sounds",
                tag: "Unit 7: On the Road",
                steps: [
                    { type: "warmup", title: "Beep Beep", en: "Song: 'It's a car! Beep! Beep!'", zh: "å”±æ­Œï¼šIt's a car! Beep! [cite_start]Beep! [cite: 1411]", vocab: ["Car", "Bus"] },
                    [cite_start]{ type: "learn", title: "Vehicles", en: "Learn: Car, Bus, Bike, Taxi.", zh: "å­¸ç¿’äº¤é€šå·¥å…·ï¼šCar (è»Š), Bus (å·´å£«), Bike (å–®è»Š), Taxi (çš„å£«) [cite: 1380]ã€‚" },
                    [cite_start]{ type: "action", title: "Drive", en: "Pretend to drive a bus.", zh: "å‹•ä½œï¼šå‡è£é–‹å·´å£«ï¼Œè½‰å‹•æ–¹å‘ç›¤ [cite: 1403]ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'It is a bus.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'It is a bus.'", phrase: "It is a bus." }
                ]
            },
            // Week 2
            {
                title: "Oops! My Bike",
                tag: "Unit 7: On the Road",
                steps: [
                    { type: "warmup", title: "Story", en: "The wheel is off the bus! [cite_start]Oh no!", zh: "æ•…äº‹ï¼šå·´å£«çš„è¼ªå­æ‰äº†ï¼Oh no! [cite: 1441]" },
                    { type: "learn", title: "Phrase", en: "Say: 'Oh, my bike!'", zh: "ç·´ç¿’çŸ­èªï¼š'Oh, my bike!' (å™¢ï¼Œæˆ‘çš„å–®è»Š) [cite_start][cite: 1379]ã€‚", vocab: ["Oh my..."] },
                    { type: "action", title: "Drop Toy", en: "Drop a toy. Say 'Oh, my (toy)!'.", zh: "æƒ…æ™¯æ¨¡æ“¬ï¼šå‡è£ç©å…·æ‰äº†ï¼Œèªª 'Oh, my...!'ã€‚" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Oh, my bike!'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Oh, my bike!'", phrase: "Oh, my bike!" }
                ]
            },
            // Week 3
            {
                title: "Traffic Lights (Phonics Cc)",
                tag: "Unit 7: Phonics",
                steps: [
                    [cite_start]{ type: "warmup", title: "Sound", en: "C is for Cat and Car.", zh: "C æ˜¯ Cat (è²“) å’Œ Car (è»Š) [cite: 1548]ã€‚", vocab: ["Cc", "/k/"] },
                    { type: "learn", title: "Rules", en: "Red means Stop. [cite_start]Green means Go.", zh: "è¦å‰‡ï¼šç´…ç‡ˆåœ (Stop)ï¼Œç¶ ç‡ˆè¡Œ (Go) [cite: 1526]ã€‚" },
                    { type: "action", title: "Red Light Game", en: "Teacher says 'Red Light'. You Stop!", zh: "ç´…ç¶ ç‡ˆéŠæˆ²ï¼šè½åˆ° 'Red Light' å°±åœä¸‹ï¼" },
                    { type: "speak", title: "Record Voice", en: "Record: 'Stop and Go.'", zh: "éŒ„éŸ³æŒ‘æˆ°ï¼š'Stop and Go.'", phrase: "Stop and Go." }
                ]
            }
        ]
    };

    // ===========================================
    // âš™ï¸ LOGIC (RENDERER)
    // ===========================================
    function loadLesson() {
        // 1. Get Params URL (?m=Sep&w=0)
        const params = new URLSearchParams(window.location.search);
        const month = params.get('m') || 'Sep';
        const weekIndex = parseInt(params.get('w') || '0');

        // 2. Data Check
        if (!db[month] || !db[month][weekIndex]) {
            document.getElementById('lesson-container').innerHTML = "<h2 style='text-align:center'>Coming Soon!</h2>";
            return;
        }

        const lesson = db[month][weekIndex];

        // 3. Render Header
        let html = `
            <div class="lesson-header">
                <span class="lesson-tag">${lesson.tag}</span>
                <h1 class="lesson-title">${lesson.title}</h1>
                <div class="lesson-subtitle">${month} â€¢ Week ${weekIndex + 1}</div>
            </div>
        `;

        // 4. Render Steps
        lesson.steps.forEach((step, index) => {
            html += `
                <div class="step-card">
                    <div class="step-number">${index + 1}</div>
                    <div class="step-title">${step.title}</div>
                    <div class="step-desc-en">${step.en}</div>
                    <div class="step-desc-zh">${step.zh}</div>
            `;

            // If Vocabulary exists
            if (step.vocab) {
                html += `<div class="flashcard-box">`;
                step.vocab.forEach(word => {
                    html += `<span class="vocab-word">${word}</span>`;
                });
                html += `</div>`;
            }

            // If Audio Recorder exists
            if (step.type === 'speak') {
                html += `
                    <div class="audio-box">
                        <button class="rec-btn" onclick="toggleRecord(this)">ğŸ¤</button>
                        <div style="flex-grow:1">
                            <strong>Tap mic to record:</strong><br>
                            <span style="color:#64748b">"${step.phrase}"</span>
                        </div>
                    </div>
                `;
            }
            
            // If Action Button (for TPR)
            if (step.type === 'action') {
                 html += `
                    <button class="action-btn" onclick="playSuccessSound()">
                        <span>â–¶ I did it!</span>
                    </button>
                `;
            }

            html += `</div>`; // Close card
        });

        document.getElementById('lesson-container').innerHTML = html;
    }

    // Audio Logic
    let mediaRecorder;
    async function toggleRecord(btn) {
        if (btn.classList.contains('recording')) {
            mediaRecorder.stop();
            btn.classList.remove('recording');
            // Play success sound
            playSuccessSound();
        } else {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                mediaRecorder.start();
                btn.classList.add('recording');
            } catch(e) {
                alert("Allow microphone access to record.");
            }
        }
    }

    function playSuccessSound() {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);
        
        osc.type = 'sine';
        osc.frequency.setValueAtTime(500, ctx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(1000, ctx.currentTime + 0.1);
        
        gain.gain.setValueAtTime(0.1, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.3);
        
        osc.start();
        osc.stop(ctx.currentTime + 0.3);
    }

    function finishLesson() {
        document.getElementById('modal').style.display = 'flex';
        // Play celebratory sound
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const osc = ctx.createOscillator();
        osc.connect(ctx.destination);
        osc.frequency.setValueAtTime(400, ctx.currentTime);
        osc.frequency.linearRampToValueAtTime(600, ctx.currentTime + 0.1);
        osc.frequency.linearRampToValueAtTime(800, ctx.currentTime + 0.2);
        osc.start();
        osc.stop(ctx.currentTime + 0.4);
    }

    // Run
    loadLesson();
</script>

</body>
</html>
