<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LinguaLab — Interactive English for Kids</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    :root {
      --primary: #2563eb;
      --accent: #f97316;
      --bg: #f8fafc;
      --card-bg: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --navy: #1f4e79;
      --radius: 20px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding-top: 86px;
    }

    /* NAVBAR С ЛОГОТИПОМ */
    .navbar {
      position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 40px; background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,.05);
    }
    .navbar-left { display: flex; align-items: center; gap: 10px; }
    .nav-logo-circle { width: 45px; height: 45px; background: #22d3ee; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 24px; }
    .nav-title { font-size: 22px; font-weight: 800; color: var(--navy); letter-spacing: -0.5px; }
    .navbar-right { display: flex; gap: 15px; }
    .navbar-right a { color: var(--navy); font-weight: 600; text-decoration: none; font-size: 15px; }

    /* БИРЮЗОВЫЙ ГРАДИЕНТ LL */
    .hero { 
      padding: 100px 8%; text-align: center; 
      background: linear-gradient(135deg, #22d3ee, #a78bfa); color: #fff; 
    }
    .hero h1 { font-size: clamp(32px, 5vw, 48px); font-weight: 800; margin-bottom: 20px; }
    .hero p { max-width: 800px; margin: 0 auto 30px; font-size: 19px; }
    /* НОВЫЙ ЦВЕТ КНОПКИ */
    .hero .cta { background: var(--navy); color: #fff; padding: 16px 36px; border-radius: 999px; font-weight: 700; display: inline-block; text-decoration: none; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .hero .cta:hover { transform: translateY(-2px); background: #2d3748; }

    /* FEATURES */
    .features { padding: 80px 8%; text-align: center; }
    .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; margin-top: 40px; }
    .card { background: #fff; border-radius: var(--radius); overflow: hidden; text-decoration: none; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.3s; border: 1px solid #e2e8f0; text-align: left; }
    .card:hover { transform: translateY(-5px); border-color: #22d3ee; }
    .card img { width: 100%; height: 140px; object-fit: cover; }
    .card-body { padding: 20px; }
    .card h3 { color: var(--navy); margin-bottom: 8px; font-weight: 700; }

    /* AI GENERATOR НИЖЕ */
    .ai-section { padding: 80px 8%; background: #edf2f7; text-align: center; }
    .ai-container { max-width: 600px; margin: 0 auto; background: #fff; padding: 40px; border-radius: var(--radius); box-shadow: 0 20px 40px rgba(0,0,0,0.05); }
    .form-group { text-align: left; margin-bottom: 18px; }
    .ai-input, .ai-select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #cbd5e1; font-size: 15px; }
    .ai-btn { width: 100%; background: var(--accent); color: #fff; border: none; padding: 16px; border-radius: 999px; font-weight: 700; cursor: pointer; transition: 0.2s; }
    .ai-btn:disabled { background: #94a3b8; }
    #ai-result { margin-top: 30px; padding: 25px; border-radius: 12px; background: #fdf2f8; border-left: 5px solid var(--accent); text-align: left; display: none; }

    footer { background: #0f172a; color: #94a3b8; padding: 40px 8%; text-align: center; font-size: 14px; }
  </style>
</head>
<body>

  <header class="navbar">
    <div class="navbar-left">
      <div class="nav-logo-circle">L</div>
      <span class="nav-title">LinguaLab</span>
    </div>
    <nav class="navbar-right">
      <a href="grammar.html">Grammar Magic</a>
      <a href="vocabulary.html">Word Bank</a>
    </nav>
  </header>

  <main>
    <section class="hero">
      <h1>Language Magic for Kids</h1>
      <p>Interactive English and Chinese practice for preschool explorers and parents.</p>
      <a class="cta" href="#ai-tool">Start Magic Journey</a>
    </section>

    <section class="features">
      <h2>Explore LinguaLab</h2>
      <div class="cards-grid">
        <a href="grammar.html" class="card">
          <img src="assets/img/grammar.png" alt="Grammar" />
          <div class="card-body"><h3>Grammar Magic</h3><p>Playful patterns for kids.</p></div>
        </a>
        <a href="vocabulary.html" class="card">
          <img src="assets/img/word.png" alt="Word" />
          <div class="card-body"><h3>Word Bank</h3><p>Visual vocabulary tools.</p></div>
        </a>
      </div>
    </section>

    <section class="ai-section" id="ai-tool">
      <div class="ai-container">
        <h2>AI Magic Generation</h2>
        <p style="font-size: 14px; color: gray; margin-bottom: 20px;">Создайте уникальное задание с помощью ИИ!</p>
        
        <div class="form-group">
          <input type="password" id="apiKey" class="ai-input" placeholder="Paste your API Key here...">
        </div>

        <div class="form-group">
          <select id="animal" class="ai-select">
            <option value="Panda">Panda</option>
            <option value="Lion">Lion</option>
            <option value="Elephant">Elephant</option>
          </select>
        </div>

        <button class="ai-btn" id="aiBtn" onclick="generateAiTask()">Generate Task</button>
        <div id="ai-result"></div>
      </div>
    </section>
  </main>

  <footer>
    <p>© 2026 LinguaLab. All Rights Reserved.</p>
  </footer>

  <script>
    let cooldownTimer;

    async function generateAiTask() {
        const apiKeyInput = document.getElementById('apiKey');
        const apiKey = apiKeyInput.value.trim();
        const animal = document.getElementById('animal').value;
        const result = document.getElementById('ai-result');
        const btn = document.getElementById('aiBtn');

        if (!apiKey) {
            alert("Please enter a valid API Key!");
            return;
        }

        // Сохраняем ключ, чтобы не вводить заново
        localStorage.setItem('ll_key', apiKey);

        btn.disabled = true;
        btn.innerText = "Generating...";
        result.style.display = "none";

        // Используем 1.5-flash — она стабильнее для бесплатных ключей
        const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;
        
        const prompt = {
            contents: [{
                parts: [{ text: `Create a very short English task for a 5-year-old child about a ${animal}. Max 15 words. No emojis.` }]
            }]
        };

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(prompt)
            });

            const data = await response.json();

            if (response.status === 429) {
                startCooldown(btn, result, "Лимит запросов исчерпан. Попробуйте через минуту.");
            } else if (data.error) {
                result.innerText = "Ошибка API: " + data.error.message;
                result.style.display = "block";
                btn.disabled = false;
                btn.innerText = "Generate Task";
            } else if (data.candidates && data.candidates[0].content) {
                result.innerText = data.candidates[0].content.parts[0].text;
                result.style.display = "block";
                btn.disabled = false;
                btn.innerText = "Generate Task";
            }
        } catch (e) {
            result.innerText = "Ошибка соединения. Проверьте интернет или ключ.";
            result.style.display = "block";
            btn.disabled = false;
            btn.innerText = "Generate Task";
        }
    }

    function startCooldown(button, display, msg) {
        let sec = 60;
        button.disabled = true;
        display.style.display = "block";
        display.innerText = msg;

        clearInterval(cooldownTimer);
        cooldownTimer = setInterval(() => {
            sec--;
            button.innerText = `Wait ${sec}s...`;
            if (sec <= 0) {
                resetAiBlock();
            }
        }, 1000);
    }

    function resetAiBlock() {
        const btn = document.getElementById('aiBtn');
        const result = document.getElementById('ai-result');
        clearInterval(cooldownTimer);
        btn.disabled = false;
        btn.innerText = "Generate Task";
        result.innerText = "Ready!";
    }

    // Загрузка ключа при открытии страницы
    window.onload = () => {
        const saved = localStorage.getItem('ll_key');
        if (saved) document.getElementById('apiKey').value = saved;
    };
</script>
</body>
</html>
